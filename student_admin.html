<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>å­¦ç”Ÿç®¡ç† Â· Student Admin</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input, button { padding: 8px; margin: 5px 0; width: 250px; }
    .box { border: 1px solid #ddd; padding: 15px; width: 300px; display: inline-block; vertical-align: top; margin-right: 20px;}
    h2 { color: #ff7d2d; }
    table { border-collapse: collapse; margin-top: 20px;}
    td, th { border: 1px solid #ccc; padding: 6px 12px; }
  </style>
</head>
<body>

<h1>å­¦ç”Ÿç®¡ç† Student Admin</h1>
<h3>APIï¼š https://lingualisten-backend.onrender.com</h3>

<!-- è·å–å­¦ç”Ÿ -->
<div class="box">
  <h2>ğŸ“˜ æ‰€æœ‰å­¦ç”Ÿ</h2>
  <button onclick="loadStudents()">åˆ·æ–° Refresh</button>
  <pre id="studentList"></pre>
</div>

<!-- æ·»åŠ å­¦ç”Ÿ -->
<div class="box">
  <h2>â• æ·»åŠ å­¦ç”Ÿ</h2>
  <input id="add_username" placeholder="ç”¨æˆ·å username"><br>
  <input id="add_password" placeholder="å¯†ç  password"><br>
  <input id="add_email" placeholder="é‚®ç®± email"><br>
  <input id="add_phone" placeholder="ç”µè¯ phone"><br>
  <button onclick="addStudent()">æ·»åŠ  Add</button>
  <p id="add_result"></p>
</div>

<!-- é‡ç½®å¯†ç  -->
<div class="box">
  <h2>ğŸ”‘ é‡ç½®å¯†ç </h2>
  <input id="reset_username" placeholder="ç”¨æˆ·å username"><br>
  <input id="reset_password" placeholder="æ–°å¯†ç  new password"><br>
  <button onclick="resetPassword()">é‡ç½® Reset</button>
  <p id="reset_result"></p>
</div>

<script>
const API = "https://lingualisten-backend.onrender.com";

async function loadStudents() {
  const res = await fetch(API + "/students");
  const data = await res.json();
  document.getElementById("studentList").textContent = JSON.stringify(data, null, 2);
}

async function addStudent() {
  const body = {
    username: document.getElementById("add_username").value,
    password: document.getElementById("add_password").value,
    email: document.getElementById("add_email").value,
    phone: document.getElementById("add_phone").value,
  };

  const res = await fetch(API + "/students/add", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(body)
  });

  const txt = await res.text();
  document.getElementById("add_result").textContent = txt;
}

async function resetPassword() {
  const body = {
    username: document.getElementById("reset_username").value,
    new_password: document.getElementById("reset_password").value,
  };

  const res = await fetch(API + "/students/reset", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(body)
  });

  const txt = await res.text();
  document.getElementById("reset_result").textContent = txt;
}
</script>

</body>
</html>
