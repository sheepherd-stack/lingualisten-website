<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>学生登录 Student Login</title>
  <style>
    body { font-family: Arial; padding: 40px; text-align:center; background:#fff7ef;}
    input, button { padding: 10px; margin: 8px 0; width: 260px; font-size:16px; }
    h1 { color:#ff7d2d; }
    #box { display:inline-block; padding:30px; background:white; border-radius:12px; box-shadow:0 0 12px rgba(0,0,0,.1); }
  </style>
</head>
<body>

<h1>LinguaListen · 学生登录</h1>

<div id="box">
  <input id="username" placeholder="用户名 Username"><br>
  <input id="password" type="password" placeholder="密码 Password"><br>
  <button onclick="login()">登录 Login</button>

  <p id="result" style="color:red;"></p>
</div>

<script>
const API = "https://lingualisten-backend.onrender.com";

async function login() {
  const user = document.getElementById("username").value.trim();
  const pass = document.getElementById("password").value.trim();
  const out = document.getElementById("result");

  if (!user || !pass) {
    out.textContent = "请输入用户名和密码 / Please enter username & password";
    return;
  }

  // 获取学生数据库
  const res = await fetch(API + "/students");
  const db = await res.json();

  if (!(user in db)) {
    out.textContent = "❌ 用户不存在 / User not found";
    return;
  }

  if (db[user].password !== pass) {
    out.textContent = "❌ 密码错误 / Wrong password";
    return;
  }

  // 登录成功 → 存储用户名并跳转
  localStorage.setItem("student", user);
  window.location.href = "student_dashboard.html";
}
</script>

</body>
</html>
