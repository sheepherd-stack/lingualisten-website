<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Teacher Admin</title>
<style>
  body { font-family: Arial; padding: 20px; max-width: 600px; margin:auto; }
  input, button { padding: 8px; margin: 5px 0; width: 100%; }
  .box { border:1px solid #ddd; padding:15px; margin-top:20px; border-radius:6px; }
</style>
</head>
<body>

<h2>ğŸ‘©â€ğŸ« å­¦ç”Ÿè´¦å·ç®¡ç†åå°</h2>

<div class="box">
  <h3>1) æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿ</h3>
  <button onclick="loadStudents()">ğŸ“‹ Load Students</button>
  <pre id="studentList"></pre>
</div>

<div class="box">
  <h3>2) æ·»åŠ å­¦ç”Ÿ</h3>
  <input id="newUser" placeholder="ç”¨æˆ·å">
  <input id="newPass" placeholder="å¯†ç ">
  <input id="newEmail" placeholder="é‚®ç®±ï¼ˆå¯é€‰ï¼‰">
  <input id="newPhone" placeholder="ç”µè¯ï¼ˆå¯é€‰ï¼‰">
  <button onclick="addStudent()">â• æ·»åŠ å­¦ç”Ÿ</button>
  <p id="addMsg"></p>
</div>

<div class="box">
  <h3>3) é‡ç½®å­¦ç”Ÿå¯†ç </h3>
  <input id="resetUser" placeholder="ç”¨æˆ·å">
  <input id="resetPass" placeholder="æ–°å¯†ç ">
  <button onclick="resetPassword()">ğŸ”‘ é‡ç½®å¯†ç </button>
  <p id="resetMsg"></p>
</div>

<script>
const API = "https://lingualisten-backend.onrender.com";

async function loadStudents() {
  const r = await fetch(API + "/students");
  const j = await r.json();
  document.getElementById("studentList").textContent = JSON.stringify(j, null, 2);
}

async function addStudent() {
  const body = {
    username: document.getElementById("newUser").value,
    password: document.getElementById("newPass").value,
    email: document.getElementById("newEmail").value,
    phone: document.getElementById("newPhone").value
  };

  const r = await fetch(API + "/students/add", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(body)
  });
  document.getElementById("addMsg").textContent = await r.text();
}

async function resetPassword() {
  const body = {
    username: document.getElementById("resetUser").value,
    new_password: document.getElementById("resetPass").value
  };

  const r = await fetch(API + "/students/reset", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(body)
  });
  document.getElementById("resetMsg").textContent = await r.text();
}
</script>

</body>
</html>
